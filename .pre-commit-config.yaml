# Pre-commit hooks for memory-benchmark-harness
# See https://pre-commit.com for more information

default_language_version:
  python: python3.11

repos:
# Standard pre-commit hooks
- repo: https://github.com/pre-commit/pre-commit-hooks
  rev: v5.0.0
  hooks:
  - id: trailing-whitespace
  - id: end-of-file-fixer
  - id: check-yaml
    args: [--unsafe]
  - id: check-toml
  - id: check-json
  - id: check-added-large-files
    args: [--maxkb=1000]
  - id: check-merge-conflict
  - id: check-case-conflict
  - id: debug-statements
  - id: detect-private-key
  - id: check-executables-have-shebangs
  - id: check-shebang-scripts-are-executable

# Ruff - Fast Python linter and formatter
- repo: https://github.com/astral-sh/ruff-pre-commit
  rev: v0.8.4
  hooks:
  - id: ruff
    args: [--fix, --exit-non-zero-on-fix]
    types_or: [python, pyi]
  - id: ruff-format
    types_or: [python, pyi]

# Type checking with mypy
- repo: https://github.com/pre-commit/mirrors-mypy
  rev: v1.14.1
  hooks:
  - id: mypy
    args: [--ignore-missing-imports, --no-error-summary]
    additional_dependencies:
    - pydantic>=2.0.0
    - types-requests
    pass_filenames: false
    entry: mypy src

# Conventional commit message format
- repo: https://github.com/compilerla/conventional-pre-commit
  rev: v4.0.0
  hooks:
  - id: conventional-pre-commit
    stages: [commit-msg]
    args: [feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert]

# Check for secrets
- repo: https://github.com/Yelp/detect-secrets
  rev: v1.5.0
  hooks:
  - id: detect-secrets
    args: [--baseline, .secrets.baseline]
    exclude: (uv\.lock|\.github/.*\.ya?ml)$

# YAML formatting
- repo: https://github.com/macisamuele/language-formatters-pre-commit-hooks
  rev: v2.14.0
  hooks:
  - id: pretty-format-yaml
    args: [--autofix, --indent=2]
    exclude: ^\.github/

# CI configuration
ci:
  autofix_commit_msg: |
    style: auto-fix pre-commit hooks

    [pre-commit.ci]
  autofix_prs: true
  autoupdate_branch: ''
  autoupdate_commit_msg: 'chore: pre-commit autoupdate'
  autoupdate_schedule: weekly
  skip: []
  submodules: false
